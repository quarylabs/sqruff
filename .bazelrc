# Common flags for all builds
common --enable_bzlmod

# Build with optimizations
build --compilation_mode=opt

# Use remote cache for CI (can be configured per-environment)
# build --remote_cache=...

# Improve build output
build --show_progress_rate_limit=0.5
build --curses=yes

# Test output
test --test_output=errors

# CI-specific settings
build:ci --color=yes
test:ci --test_output=all

# Ensure MODULE.bazel.lock is up-to-date with Cargo.lock in CI
# If Cargo.lock changes, MODULE.bazel.lock must be regenerated with:
#   bazel mod deps --lockfile_mode=update
common:ci --lockfile_mode=error
